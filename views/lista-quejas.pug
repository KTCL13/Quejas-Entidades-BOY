extends layout

block content
  .container.mt-4
    // Selector de entidad
    .mb-3
      label.form-label(for="entidad") Entidad Pública
      select.form-select#entidad(name="entidad")
        option(value="") Seleccione una entidad...
        each entity in entities
          option(value=entity.id) #{entity.name}

    // Tabla de quejas
    table.table.table-bordered
      thead.table-secondary
        tr
          th Quejas
          th Estado
          th Acciones
      tbody

    // Controles de paginación
    nav.mt-3
      ul.pagination.justify-content-center#pagination

    // Modal de confirmación
    .modal.fade#deleteModal(tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true")
      .modal-dialog
        .modal-content
          .modal-header
            h5.modal-title#deleteModalLabel Confirmar Eliminación
            button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
          .modal-footer
            button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Cancelar
            button.btn.btn-danger#confirmDeleteBtn(type="button") Confirmar Borrado

    // Modal de sesión expirada
    .modal.fade#sessionExpiredModal(tabindex="-1" aria-labelledby="sessionExpiredModalLabel" aria-hidden="true")
      .modal-dialog.modal-dialog-centered
        .modal-content
          .modal-header.bg-danger.text-white
            h5.modal-title#sessionExpiredModalLabel Necesita Iniciar Sesión
            button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
          .modal-body
            | No has iniciado sesión o tu sesión ha expirado. Por favor, inicia sesión nuevamente para continuar.
          .modal-footer
            button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Cancelar
            button.btn.btn-primary(type="button" onclick="logoutAndRedirect()") Iniciar sesión


  // Scripts
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
  script(src="/js/main.js")
