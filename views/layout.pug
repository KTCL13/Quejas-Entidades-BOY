extends layout

block content
  .container.mt-4
    h2.text-center.mb-4.text-primary.fw-bold
      i.bi.bi-clipboard-check.me-2
      | Gestión de Quejas

    table.table.table-hover.align-middle.shadow-sm
      thead.table-primary.text-center
        tr
          th ID
          th Entidad
          th Descripción
          th Estado
          th Acciones
      tbody
        each queja in quejas
          tr
            td.text-center #{queja.id}
            td #{queja.Entity.nombre}
            td #{queja.descripcion}
            td.text-center
              span.badge.rounded-pill.px-3.py-2.fs-6(
                class= queja.estado === 'pendiente' ? 'bg-warning text-dark' :
                       queja.estado === 'en proceso' ? 'bg-info text-dark' :
                       'bg-success'
              ) #{queja.estado}
            td.text-center
              button.btn.btn-outline-primary.btn-sm(
                type='button',
                data-bs-toggle='modal',
                data-bs-target='#modalCambiarEstado',
                data-id=queja.id,
                data-estado=queja.estado
              )
                i.bi.bi-arrow-repeat.me-1
                | Cambiar Estado

  // Modal moderno y profesional
  div.modal.fade#modalCambiarEstado(tabindex='-1', aria-labelledby='modalCambiarEstadoLabel', aria-hidden='true')
    .modal-dialog.modal-dialog-centered
      .modal-content.shadow-lg.border-0.rounded-4
        .modal-header.bg-primary.text-white
          h5.modal-title#modalCambiarEstadoLabel 
            i.bi.bi-pencil-square.me-2
            | Actualizar Estado de la Queja
          button.btn-close.btn-close-white(type='button', data-bs-dismiss='modal', aria-label='Close')
        .modal-body
          p.mb-3.text-secondary.text-center
            | Selecciona el nuevo estado para esta queja:
          .form-floating.mb-3
            select.form-select#nuevoEstado
              option(value='pendiente') Pendiente
              option(value='en proceso') En proceso
              option(value='resuelta') Resuelta
            label(for='nuevoEstado') Estado
        .modal-footer.justify-content-between
          button.btn.btn-outline-secondary.rounded-pill(type='button', data-bs-dismiss='modal')
            i.bi.bi-x-circle.me-1
            | Cancelar
          button.btn.btn-success.rounded-pill#btnGuardarEstado(type='button')
            i.bi.bi-check-circle.me-1
            | Guardar cambios
